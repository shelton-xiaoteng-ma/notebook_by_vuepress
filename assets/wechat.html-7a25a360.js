import{_ as o,Y as p,Z as l,a0 as n,a1 as s,a2 as e,a4 as t,E as i}from"./framework-957baa9a.js";const c={},r=n("h1",{id:"wechat-微信",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#wechat-微信","aria-hidden":"true"},"#"),s(" wechat 微信")],-1),u=n("p",null,"[TOC]",-1),d={href:"https://www.cnblogs.com/37yan/p/15200868.html",target:"_blank",rel:"noopener noreferrer"},k=n("h2",{id:"_1-配置过程",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#_1-配置过程","aria-hidden":"true"},"#"),s(" 1. 配置过程")],-1),m={href:"https://work.weixin.qq.com/wework_admin/register_wx?from=loginpage",target:"_blank",rel:"noopener noreferrer"},_=n("ul",null,[n("li",null,"自己的微信号作为管理员")],-1),h=n("li",null,[n("p",null,[s("创建微信应用"),n("code",null,"message_pusher"),s(", 记录secret")])],-1),q=n("li",null,[n("p",null,"在我的企业, 微信插件中扫码添加, 可以不用再安装企业微信, 在原有微信中查看企业微信信息")],-1),v={href:"https://developer.work.weixin.qq.com/document/path/90236",target:"_blank",rel:"noopener noreferrer"},g={href:"https://developer.work.weixin.qq.com/document/path/91039",target:"_blank",rel:"noopener noreferrer"},b=t(`<div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">import</span> requests
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,1),w=t(`<li><p>调用代码:</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment"># https://qyapi.weixin.qq.com/cgi-bin/message/send?access_token=ACCESS_TOKEN</span>
<span class="token keyword">import</span> requests

post_data <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token comment"># &quot;touser&quot; : &quot;UserID1|UserID2|UserID3&quot;, # 企业微信后台, 通讯录中查看, UserID1 即账号</span>
    <span class="token comment"># &quot;toparty&quot; : &quot;PartyID1|PartyID2&quot;,</span>
    <span class="token comment"># &quot;totag&quot; : &quot;TagID1 | TagID2&quot;,</span>
    <span class="token string">&quot;msgtype&quot;</span> <span class="token punctuation">:</span> <span class="token string">&quot;text&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;agentid&quot;</span> <span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token string">&quot;text&quot;</span> <span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token string">&quot;content&quot;</span> <span class="token punctuation">:</span> <span class="token string">&quot;你的快递已到，请携带工卡前往邮件中心领取。\\n出发前可查看&lt;a href=\\&quot;http://work.weixin.qq.com\\&quot;&gt;邮件中心视频实况&lt;/a&gt;，聪明避开排队。&quot;</span> <span class="token comment"># 消息内容，最长不超过2048个字节，超过将截断（支持id转译）</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;safe&quot;</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token string">&quot;enable_id_trans&quot;</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token string">&quot;enable_duplicate_check&quot;</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token string">&quot;duplicate_check_interval&quot;</span><span class="token punctuation">:</span> <span class="token number">1800</span>
<span class="token punctuation">}</span>
url <span class="token operator">=</span> <span class="token string-interpolation"><span class="token string">f&quot;https://qyapi.weixin.qq.com/cgi-bin/message/send?access_token=</span><span class="token interpolation"><span class="token punctuation">{</span>ACCESS_TOKEN<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span>
res <span class="token operator">=</span> requests<span class="token punctuation">.</span>post<span class="token punctuation">(</span>url<span class="token punctuation">,</span> <span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>`,1);function f(x,y){const a=i("ExternalLinkIcon");return p(),l("div",null,[r,u,n("p",null,[s("使用接口给微信发送消息, 参考了"),n("a",d,[s("借助企业微信实现“调接口”给个人微信发消息"),e(a)]),s(", 使用企业应用")]),k,n("ol",null,[n("li",null,[n("p",null,[s("注册企业微信"),n("a",m,[s("https://work.weixin.qq.com/wework_admin/register_wx?from=loginpage"),e(a)])]),_]),h,q,n("li",null,[n("p",null,[s("消息推送文档"),n("a",v,[s("发送应用消息"),e(a)])])]),n("li",null,[n("p",null,[n("a",g,[s("获取access_token"),e(a)])]),b]),w])])}const D=o(c,[["render",f],["__file","wechat.html.vue"]]);export{D as default};
