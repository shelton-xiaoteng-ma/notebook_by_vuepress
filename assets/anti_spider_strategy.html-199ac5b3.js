import{_ as a,Y as q,Z as s,a0 as t,a1 as o,a2 as e,a3 as n,a4 as l,E as u}from"./framework-957baa9a.js";const d={},c=l('<h1 id="反爬虫策略" tabindex="-1"><a class="header-anchor" href="#反爬虫策略" aria-hidden="true">#</a> 反爬虫策略</h1><p>Anti-spider strategy</p><ol><li>通过header <ol><li>User-Agent, Cookie, Referer</li></ol></li><li>访问行为(比如高并发)</li><li>JavaScript动态计算</li><li>验证码</li><li>蜜罐(设置一些普通用户访问不到的内容)</li><li>识别到爬虫，返回</li></ol><h2 id="_1-反爬措施收集" tabindex="-1"><a class="header-anchor" href="#_1-反爬措施收集" aria-hidden="true">#</a> 1. 反爬措施收集</h2>',4),_=t("li",null,"|Cookie |验证用户cookie |大众点评|",-1),h=t("li",null,"|上行加密 |加密了上行请求的参数，导致无法分析请求 |航旅纵横|",-1),p=t("li",null,"|Headers中加Shield实时加密 |对每个请求都做了加密和验证 |小红书|",-1),f=l("<li>|阻止web调试 |用脚本检测是否打开了浏览器调试工具 |同程旅游|</li><li>|多次请求 |通过中间请求获取token给目标请求 |JAL(日航国内版)|</li><li>东航反爬记录 <ol><li>先发送http://observer.ceair.com/ta.png? <ol><li>发送&quot;seriesid&quot;:&quot;8980ed209e5811eab0aebfab2f9b3d9e&quot;, 可以随机</li><li>不需要cookie</li><li>返回set-cookie: user_ta_session_id, Webtrends</li></ol></li><li>发送http://www.ceair.com/otabooking/flight-search!doFlightSearch.shtml <ol><li>cookie: 带user_ta_session_id, Webtrends</li><li>post_data中包含seriesid <ol><li>seriesid</li><li>{&quot;adtCount&quot;:1,&quot;chdCount&quot;:0,&quot;infCount&quot;:0,&quot;currency&quot;:&quot;CNY&quot;,&quot;tripType&quot;:&quot;OW&quot;,&quot;recommend&quot;:false,&quot;reselect&quot;:&quot;&quot;,&quot;page&quot;:&quot;0&quot;,&quot;sortType&quot;:&quot;a&quot;,&quot;sortExec&quot;:&quot;a&quot;,&quot;seriesid&quot;:&quot;8980ed209e5811eab0aebfab2f9b3d9e&quot;,&quot;segmentList&quot;:[{&quot;deptCd&quot;:&quot;PEK&quot;,&quot;arrCd&quot;:&quot;SHA&quot;,&quot;deptDt&quot;:&quot;2020-05-26&quot;,&quot;deptAirport&quot;:&quot;&quot;,&quot;arrAirport&quot;:&quot;&quot;,&quot;deptCdTxt&quot;:&quot;北京&quot;,&quot;arrCdTxt&quot;:&quot;上海&quot;,&quot;deptCityCode&quot;:&quot;BJS&quot;,&quot;arrCityCode&quot;:&quot;SHA&quot;}],&quot;version&quot;:&quot;A.1.0&quot;}</li></ol></li></ol></li><li>有的ip可能需要发送两次返回结果</li></ol></li>",3),b={href:"https://www.zhihu.com/question/24188524",target:"_blank",rel:"noopener noreferrer"},m={href:"https://github.com/sindresorhus/devtools-detect",target:"_blank",rel:"noopener noreferrer"};function k(C,g){const r=u("RouterLink"),i=u("ExternalLinkIcon");return q(),s("div",null,[c,t("ol",null,[_,h,p,t("li",null,[o("|"),e(r,{to:"/python/python_crawler/protobuf.html"},{default:n(()=>[o("Protobuf")]),_:1}),o(" |请求和响应采用protobuf传输, 如果找不到加密模版, 就无法理解返内容 |Mercari(美国)|")]),f,t("li",null,[o("web端用js检测用户浏览器是否开启调试面板 "),t("ul",null,[t("li",null,[t("a",b,[o("实现参考知乎"),e(i)])]),t("li",null,[t("a",m,[o("github-用法"),e(i)])])])])])])}const w=a(d,[["render",k],["__file","anti_spider_strategy.html.vue"]]);export{w as default};
