import{_ as i,Y as o,Z as p,a0 as n,a1 as s,a2 as e,a4 as t,E as l}from"./framework-957baa9a.js";const c={},r=t(`<h1 id="selenium" tabindex="-1"><a class="header-anchor" href="#selenium" aria-hidden="true">#</a> selenium</h1><h2 id="_1-安装selenium" tabindex="-1"><a class="header-anchor" href="#_1-安装selenium" aria-hidden="true">#</a> 1. 安装selenium</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> pip <span class="token function">install</span> selenium

<span class="token function">sudo</span> python3 <span class="token parameter variable">-m</span> pip <span class="token function">install</span> selenium
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_2-安装浏览器驱动" tabindex="-1"><a class="header-anchor" href="#_2-安装浏览器驱动" aria-hidden="true">#</a> 2. 安装浏览器驱动</h2>`,4),u=n("li",null,[n("p",null,"浏览器选择 当你使用PhantomJS时, selenium会提醒PhantomJS已经被弃用,并且 PhantomJS 不再更新. 同时为了便于调试, windows上用的chrome, 所以选择chrome")],-1),d=n("p",null,"chromedriver安装",-1),m=n("p",null,"chrome安装",-1),v=n("li",null,"windows 安装都很简单, 主要说明linux安装",-1),k={href:"https://intoli.com/blog/installing-google-chrome-on-centos/",target:"_blank",rel:"noopener noreferrer"},h={href:"https://intoli.com/install-google-chrome.sh",target:"_blank",rel:"noopener noreferrer"},b={href:"https://devopsqa.wordpress.com/2018/03/08/install-google-chrome-and-chromedriver-in-amazon-linux-machine/",target:"_blank",rel:"noopener noreferrer"},g=n("strong",null,"自动适配浏览器驱动",-1),_={href:"https://stackoverflow.com/questions/29858752/error-message-chromedriver-executable-needs-to-be-available-in-the-path/52878725#52878725",target:"_blank",rel:"noopener noreferrer"},f=t(`<div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 安装</span>
pip <span class="token function">install</span> webdriver-manager

<span class="token comment"># 自动匹配</span>
from selenium <span class="token function">import</span> webdriver
from webdriver_manager.chrome <span class="token function">import</span> ChromeDriverManager

driver <span class="token operator">=</span> webdriver.Chrome<span class="token punctuation">(</span>ChromeDriverManager<span class="token punctuation">(</span><span class="token punctuation">)</span>.install<span class="token punctuation">(</span><span class="token punctuation">))</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,1),x=n("h2",{id:"_3-快速入门",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#_3-快速入门","aria-hidden":"true"},"#"),s(" 3. 快速入门")],-1),y=t(`<li><p>启动浏览器</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">launch_driver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># Chrome配置</span>
    option <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>ChromeOptions<span class="token punctuation">(</span><span class="token punctuation">)</span>
    option<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">&#39;headless&#39;</span><span class="token punctuation">)</span>  <span class="token comment"># 无界面, 服务器使用</span>
    prefs <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&quot;profile.managed_default_content_settings.images&quot;</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">}</span>  <span class="token comment"># 不加载图片</span>
    option<span class="token punctuation">.</span>add_experimental_option<span class="token punctuation">(</span><span class="token string">&quot;prefs&quot;</span><span class="token punctuation">,</span> prefs<span class="token punctuation">)</span>

    driver <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Chrome<span class="token punctuation">(</span>chrome_options<span class="token operator">=</span>option<span class="token punctuation">)</span>
    driver<span class="token punctuation">.</span>implicitly_wait<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>

    <span class="token keyword">return</span> driver
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>加载页面</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>driver <span class="token operator">=</span> launch_driver<span class="token punctuation">(</span><span class="token punctuation">)</span>
driver<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>driver的一些属性</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>driver<span class="token punctuation">.</span>title  <span class="token comment"># 页面标题</span>
driver<span class="token punctuation">.</span>page_source  <span class="token comment"># 页面源代码</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>调试</p><p>有的时候页面出现未知标签, 本地又不方便复现, 就需要保留代码调试</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment"># 截图</span>
driver<span class="token punctuation">.</span>save_screenshot<span class="token punctuation">(</span><span class="token string">&quot;codingpy.png&quot;</span><span class="token punctuation">)</span>

<span class="token comment"># 保留源代码</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>driver<span class="token punctuation">.</span>page_source<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>常用配置</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>options <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>ChromeOptions<span class="token punctuation">(</span><span class="token punctuation">)</span>
options<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">&#39;headless&#39;</span><span class="token punctuation">)</span>
options<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">&#39;--proxy-server={}&#39;</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span><span class="token string">&#39;127.0.0.1:8798&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
options<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">&#39;Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.103 Mobile Safari/537.36&#39;</span><span class="token punctuation">)</span>
options<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">&#39;-disable-gpu&#39;</span><span class="token punctuation">)</span>
options<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">&#39;--no-sandbox&#39;</span><span class="token punctuation">)</span>
options<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">&#39;lang=zh-CN,zh,zh-TW,en-US,en&#39;</span><span class="token punctuation">)</span>
options<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">&#39;blink-settings=imagesEnabled=false&#39;</span><span class="token punctuation">)</span>
options<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">&#39;--ignore-ssl-errors=true&#39;</span><span class="token punctuation">)</span>
options<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">&#39;--disk-cache=yes&#39;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>`,5),w={href:"https://stackoverflow.com/questions/58458816/how-to-set-proxy-authentication-usernamepassword-using-python-selenium",target:"_blank",rel:"noopener noreferrer"},C=t(`<ul><li><p>install</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>python3 <span class="token parameter variable">-m</span> pip <span class="token function">install</span> selenium-wire
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>demo</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">from</span> seleniumwire <span class="token keyword">import</span> webdriver

wire_options <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">&#39;proxy&#39;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token string">&#39;http&#39;</span><span class="token punctuation">:</span> <span class="token string">&#39;http://{}&#39;</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>auth_proxies<span class="token punctuation">)</span><span class="token punctuation">,</span> 
        <span class="token string">&#39;https&#39;</span><span class="token punctuation">:</span> <span class="token string">&#39;https://{}&#39;</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>auth_proxies<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
driver <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Chrome<span class="token punctuation">(</span>seleniumwire_options<span class="token operator">=</span>wire_options<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul>`,1);function q(N,S){const a=l("ExternalLinkIcon");return o(),p("div",null,[r,n("ol",null,[u,n("li",null,[d,n("ol",null,[n("li",null,[m,n("ul",null,[v,n("li",null,[s("Amazon Linux: "),n("a",k,[s("安装说明"),e(a)])]),n("li",null,[s("centos: curl "),n("a",h,[s("https://intoli.com/install-google-chrome.sh"),e(a)]),s(" | bash")])])]),n("li",null,[n("p",null,[s("chromedriver安装: "),n("a",b,[s("安装说明"),e(a)])]),n("ul",null,[n("li",null,[n("p",null,[g,s(" 参考"),n("a",_,[s("chromedriver-executable-needs-to-be-available-in-the-path"),e(a)])]),f])])])])])]),x,n("ol",null,[y,n("li",null,[n("p",null,[s("添加authentication "),n("a",w,[s("HTTP Proxy Authentication with Chromedriver in Selenium"),e(a)])]),C])])])}const M=i(c,[["render",q],["__file","index.html.vue"]]);export{M as default};
