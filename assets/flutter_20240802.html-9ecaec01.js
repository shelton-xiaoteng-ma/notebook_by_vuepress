import{_ as t,Y as p,Z as i,a0 as n,a1 as s,a2 as c,a4 as a,E as o}from"./framework-957baa9a.js";const l={},u=n("h1",{id:"_1-flutter开发日记-auth",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#_1-flutter开发日记-auth","aria-hidden":"true"},"#"),s(" 1 Flutter开发日记 | Auth")],-1),r=n("h2",{id:"_0-auth选用firebase",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#_0-auth选用firebase","aria-hidden":"true"},"#"),s(" 0 auth选用firebase")],-1),d=a(`<li><p>安装依赖</p><div class="language-dart line-numbers-mode" data-ext="dart"><pre class="language-dart"><code>firebase_core<span class="token punctuation">:</span> <span class="token operator">^</span><span class="token number">3.3</span><span class="token number">.0</span>
firebase_auth<span class="token punctuation">:</span> <span class="token operator">^</span><span class="token number">5.1</span><span class="token number">.3</span>
firebase_ui_auth<span class="token punctuation">:</span> <span class="token operator">^</span><span class="token number">1.15</span><span class="token number">.0</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>firebase配置</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>firebase login
dart pub global activate flutterfire_cli

<span class="token comment"># 选择对应的项目</span>
flutterfire configure

firebase project name: douyin-clone
Android application <span class="token function">id</span> <span class="token punctuation">(</span>or package name<span class="token punctuation">)</span>: top.sheltonma
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>`,2),k={href:"https://github.com/firebase/flutterfire/discussions/7617",target:"_blank",rel:"noopener noreferrer"},m=a(`<li><p>使用email登录</p><ol><li><p><code>The plugin &quot;firebase_auth&quot; requires a higher minimum iOS deployment version</code>, iOS修改最低支持版本, <code>/ios/Podfile</code> change <code>platform :ios, &#39;13.0&#39;</code></p></li><li><p>firebase auth配置</p></li><li><p>使用firebase_ui_auth.SignInScreen</p><div class="language-dart line-numbers-mode" data-ext="dart"><pre class="language-dart"><code><span class="token keyword">import</span> <span class="token string-literal"><span class="token string">&#39;package:firebase_auth/firebase_auth.dart&#39;</span></span> <span class="token keyword">hide</span> <span class="token class-name">EmailAuthProvider</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string-literal"><span class="token string">&#39;package:firebase_ui_auth/firebase_ui_auth.dart&#39;</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string-literal"><span class="token string">&#39;package:flutter/material.dart&#39;</span></span><span class="token punctuation">;</span>

<span class="token keyword">return</span> <span class="token class-name">Scaffold</span><span class="token punctuation">(</span>
  body<span class="token punctuation">:</span> <span class="token class-name">SignInScreen</span><span class="token punctuation">(</span>
    providers<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token class-name">EmailAuthProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    actions<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token class-name">AuthStateChangeAction</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">SignedIn</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> state<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>state<span class="token punctuation">.</span>user<span class="token operator">!</span><span class="token punctuation">.</span>emailVerified<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token class-name">Navigator</span><span class="token punctuation">.</span><span class="token function">pushNamed</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&#39;/verify-email&#39;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          <span class="token class-name">Navigator</span><span class="token punctuation">.</span><span class="token function">pushReplacementNamed</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> <span class="token class-name">HomeScreen</span><span class="token punctuation">.</span>screenId<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token class-name">AuthStateChangeAction</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">SigningUp</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> state<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Navigator</span><span class="token punctuation">.</span><span class="token function">pushReplacementNamed</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> screenId<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol></li>`,1),v=n("h2",{id:"_1-微信登录-todo",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#_1-微信登录-todo","aria-hidden":"true"},"#"),s(" 1 微信登录[Todo]")],-1),b=n("ol",null,[n("li",null,[s("依赖 "),n("code",null,"fluwx: ^4.5.5")])],-1);function h(f,_){const e=o("ExternalLinkIcon");return p(),i("div",null,[u,r,n("ol",null,[d,n("li",null,[n("p",null,[s(".gitignore修改, "),n("a",k,[s("Should we commit firebase_options.dart file in git"),c(e)])])]),m]),v,b])}const x=t(l,[["render",h],["__file","flutter_20240802.html.vue"]]);export{x as default};
