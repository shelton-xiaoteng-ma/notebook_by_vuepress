import{_ as a,Y as s,Z as e,a4 as n}from"./framework-957baa9a.js";const l={},t=n(`<h1 id="mysql-docker" tabindex="-1"><a class="header-anchor" href="#mysql-docker" aria-hidden="true">#</a> mysql docker</h1><ol><li><p>docker-mysql</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> run <span class="token parameter variable">-p</span> <span class="token number">3306</span>:3306 <span class="token parameter variable">--restart</span><span class="token operator">=</span>always <span class="token parameter variable">--name</span> xiaoteng_mysql <span class="token punctuation">\\</span>
    <span class="token parameter variable">-v</span> /home/xiaoteng/data/mysql/conf:/etc/mysql/conf.d <span class="token punctuation">\\</span>
    <span class="token parameter variable">-v</span> /home/xiaoteng/data/mysql/logs:/var/log/mysql <span class="token punctuation">\\</span>
    <span class="token parameter variable">-v</span> /home/xiaoteng/data/mysql/db:/var/lib/mysql <span class="token punctuation">\\</span>
    <span class="token parameter variable">-v</span> /home/xiaoteng/data/mysql/data:/var/lib/mysql-files <span class="token punctuation">\\</span>
    <span class="token parameter variable">-e</span> <span class="token assign-left variable">MYSQL_ROOT_PASSWORD</span><span class="token operator">=</span>xxx <span class="token punctuation">\\</span>
    <span class="token parameter variable">-d</span> mysql:latest

<span class="token function">docker</span> create <span class="token parameter variable">-p</span> <span class="token number">3306</span>:3306 <span class="token parameter variable">--name</span> docker_mysql <span class="token parameter variable">-v</span> /my/own/datadir:/var/lib/mysql <span class="token parameter variable">-e</span> <span class="token assign-left variable">MYSQL_ROOT_PASSWORD</span><span class="token operator">=</span>password mysql
<span class="token comment"># 环境变量说明</span>
<span class="token parameter variable">-v</span> /my/custom:/etc/mysql/conf.d <span class="token comment"># conf.d 是配置文件, 位于custom, 注意只需要路径</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>使用mysql_docker作为客户端</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> run <span class="token parameter variable">-it</span> <span class="token parameter variable">--rm</span> mysql mysql <span class="token parameter variable">-hsome.mysql.host</span> -usome-mysql-user <span class="token parameter variable">-p</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>创建mysql dump</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> <span class="token builtin class-name">exec</span> some-mysql <span class="token function">sh</span> <span class="token parameter variable">-c</span> <span class="token string">&#39;exec mysqldump --all-databases -uroot -p&quot;$MYSQL_ROOT_PASSWORD&quot;&#39;</span> <span class="token operator">&gt;</span> /some/path/on/your/host/all-databases.sql
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>导入mysql dump</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> <span class="token builtin class-name">exec</span> <span class="token parameter variable">-i</span> some-mysql <span class="token function">sh</span> <span class="token parameter variable">-c</span> <span class="token string">&#39;exec mysql -uroot -p&quot;$MYSQL_ROOT_PASSWORD&quot;&#39;</span> <span class="token operator">&lt;</span> /some/path/on/your/host/all-databases.sql
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li></ol>`,2),r=[t];function p(o,i){return s(),e("div",null,r)}const d=a(l,[["render",p],["__file","mysql_docker.html.vue"]]);export{d as default};
